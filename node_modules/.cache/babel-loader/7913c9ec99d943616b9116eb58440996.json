{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.theme = exports.Extension = exports.renderToHtml = exports.serializer = exports.parser = exports.schema = void 0;\n\nconst React = __importStar(require(\"react\"));\n\nconst memoize_1 = __importDefault(require(\"lodash/memoize\"));\n\nconst prosemirror_state_1 = require(\"prosemirror-state\");\n\nconst prosemirror_dropcursor_1 = require(\"prosemirror-dropcursor\");\n\nconst prosemirror_gapcursor_1 = require(\"prosemirror-gapcursor\");\n\nconst prosemirror_view_1 = require(\"prosemirror-view\");\n\nconst prosemirror_model_1 = require(\"prosemirror-model\");\n\nconst prosemirror_inputrules_1 = require(\"prosemirror-inputrules\");\n\nconst prosemirror_keymap_1 = require(\"prosemirror-keymap\");\n\nconst prosemirror_commands_1 = require(\"prosemirror-commands\");\n\nconst prosemirror_utils_1 = require(\"prosemirror-utils\");\n\nconst styled_components_1 = require(\"styled-components\");\n\nconst theme_1 = require(\"./styles/theme\");\n\nconst dictionary_1 = __importDefault(require(\"./dictionary\"));\n\nconst Flex_1 = __importDefault(require(\"./components/Flex\"));\n\nconst SelectionToolbar_1 = __importDefault(require(\"./components/SelectionToolbar\"));\n\nconst BlockMenu_1 = __importDefault(require(\"./components/BlockMenu\"));\n\nconst EmojiMenu_1 = __importDefault(require(\"./components/EmojiMenu\"));\n\nconst LinkToolbar_1 = __importDefault(require(\"./components/LinkToolbar\"));\n\nconst Tooltip_1 = __importDefault(require(\"./components/Tooltip\"));\n\nconst ExtensionManager_1 = __importDefault(require(\"./lib/ExtensionManager\"));\n\nconst ComponentView_1 = __importDefault(require(\"./lib/ComponentView\"));\n\nconst headingToSlug_1 = __importDefault(require(\"./lib/headingToSlug\"));\n\nconst editor_1 = require(\"./styles/editor\");\n\nconst Doc_1 = __importDefault(require(\"./nodes/Doc\"));\n\nconst Text_1 = __importDefault(require(\"./nodes/Text\"));\n\nconst Blockquote_1 = __importDefault(require(\"./nodes/Blockquote\"));\n\nconst BulletList_1 = __importDefault(require(\"./nodes/BulletList\"));\n\nconst CodeBlock_1 = __importDefault(require(\"./nodes/CodeBlock\"));\n\nconst CodeFence_1 = __importDefault(require(\"./nodes/CodeFence\"));\n\nconst CheckboxList_1 = __importDefault(require(\"./nodes/CheckboxList\"));\n\nconst Emoji_1 = __importDefault(require(\"./nodes/Emoji\"));\n\nconst CheckboxItem_1 = __importDefault(require(\"./nodes/CheckboxItem\"));\n\nconst Embed_1 = __importDefault(require(\"./nodes/Embed\"));\n\nconst HardBreak_1 = __importDefault(require(\"./nodes/HardBreak\"));\n\nconst Heading_1 = __importDefault(require(\"./nodes/Heading\"));\n\nconst HorizontalRule_1 = __importDefault(require(\"./nodes/HorizontalRule\"));\n\nconst Image_1 = __importDefault(require(\"./nodes/Image\"));\n\nconst ListItem_1 = __importDefault(require(\"./nodes/ListItem\"));\n\nconst Notice_1 = __importDefault(require(\"./nodes/Notice\"));\n\nconst OrderedList_1 = __importDefault(require(\"./nodes/OrderedList\"));\n\nconst Paragraph_1 = __importDefault(require(\"./nodes/Paragraph\"));\n\nconst Table_1 = __importDefault(require(\"./nodes/Table\"));\n\nconst TableCell_1 = __importDefault(require(\"./nodes/TableCell\"));\n\nconst TableHeadCell_1 = __importDefault(require(\"./nodes/TableHeadCell\"));\n\nconst TableRow_1 = __importDefault(require(\"./nodes/TableRow\"));\n\nconst Bold_1 = __importDefault(require(\"./marks/Bold\"));\n\nconst Code_1 = __importDefault(require(\"./marks/Code\"));\n\nconst Highlight_1 = __importDefault(require(\"./marks/Highlight\"));\n\nconst Italic_1 = __importDefault(require(\"./marks/Italic\"));\n\nconst Link_1 = __importDefault(require(\"./marks/Link\"));\n\nconst Strikethrough_1 = __importDefault(require(\"./marks/Strikethrough\"));\n\nconst Placeholder_1 = __importDefault(require(\"./marks/Placeholder\"));\n\nconst Underline_1 = __importDefault(require(\"./marks/Underline\"));\n\nconst BlockMenuTrigger_1 = __importDefault(require(\"./plugins/BlockMenuTrigger\"));\n\nconst EmojiTrigger_1 = __importDefault(require(\"./plugins/EmojiTrigger\"));\n\nconst Folding_1 = __importDefault(require(\"./plugins/Folding\"));\n\nconst History_1 = __importDefault(require(\"./plugins/History\"));\n\nconst Keys_1 = __importDefault(require(\"./plugins/Keys\"));\n\nconst MaxLength_1 = __importDefault(require(\"./plugins/MaxLength\"));\n\nconst Placeholder_2 = __importDefault(require(\"./plugins/Placeholder\"));\n\nconst SmartText_1 = __importDefault(require(\"./plugins/SmartText\"));\n\nconst TrailingNode_1 = __importDefault(require(\"./plugins/TrailingNode\"));\n\nconst PasteHandler_1 = __importDefault(require(\"./plugins/PasteHandler\"));\n\nvar server_1 = require(\"./server\");\n\nObject.defineProperty(exports, \"schema\", {\n  enumerable: true,\n  get: function () {\n    return server_1.schema;\n  }\n});\nObject.defineProperty(exports, \"parser\", {\n  enumerable: true,\n  get: function () {\n    return server_1.parser;\n  }\n});\nObject.defineProperty(exports, \"serializer\", {\n  enumerable: true,\n  get: function () {\n    return server_1.serializer;\n  }\n});\nObject.defineProperty(exports, \"renderToHtml\", {\n  enumerable: true,\n  get: function () {\n    return server_1.renderToHtml;\n  }\n});\n\nvar Extension_1 = require(\"./lib/Extension\");\n\nObject.defineProperty(exports, \"Extension\", {\n  enumerable: true,\n  get: function () {\n    return __importDefault(Extension_1).default;\n  }\n});\nexports.theme = theme_1.light;\n\nclass RichMarkdownEditor extends React.PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      isRTL: false,\n      isEditorFocused: false,\n      selectionMenuOpen: false,\n      blockMenuOpen: false,\n      linkMenuOpen: false,\n      blockMenuSearch: \"\",\n      emojiMenuOpen: false\n    };\n\n    this.calculateDir = () => {\n      if (!this.element) return;\n      const isRTL = this.props.dir === \"rtl\" || getComputedStyle(this.element).direction === \"rtl\";\n\n      if (this.state.isRTL !== isRTL) {\n        this.setState({\n          isRTL\n        });\n      }\n    };\n\n    this.value = () => {\n      return this.serializer.serialize(this.view.state.doc);\n    };\n\n    this.handleChange = () => {\n      if (!this.props.onChange) return;\n      this.props.onChange(() => {\n        return this.value();\n      });\n    };\n\n    this.handleSave = () => {\n      const {\n        onSave\n      } = this.props;\n\n      if (onSave) {\n        onSave({\n          done: false\n        });\n      }\n    };\n\n    this.handleSaveAndExit = () => {\n      const {\n        onSave\n      } = this.props;\n\n      if (onSave) {\n        onSave({\n          done: true\n        });\n      }\n    };\n\n    this.handleEditorBlur = () => {\n      this.setState({\n        isEditorFocused: false\n      });\n    };\n\n    this.handleEditorFocus = () => {\n      this.setState({\n        isEditorFocused: true\n      });\n    };\n\n    this.handleOpenSelectionMenu = () => {\n      this.setState({\n        blockMenuOpen: false,\n        selectionMenuOpen: true\n      });\n    };\n\n    this.handleCloseSelectionMenu = () => {\n      this.setState({\n        selectionMenuOpen: false\n      });\n    };\n\n    this.handleOpenLinkMenu = () => {\n      this.setState({\n        blockMenuOpen: false,\n        linkMenuOpen: true\n      });\n    };\n\n    this.handleCloseLinkMenu = () => {\n      this.setState({\n        linkMenuOpen: false\n      });\n    };\n\n    this.handleOpenBlockMenu = search => {\n      this.setState({\n        blockMenuOpen: true,\n        blockMenuSearch: search\n      });\n    };\n\n    this.handleCloseBlockMenu = () => {\n      if (!this.state.blockMenuOpen) return;\n      this.setState({\n        blockMenuOpen: false\n      });\n    };\n\n    this.handleSelectRow = (index, state) => {\n      this.view.dispatch(prosemirror_utils_1.selectRow(index)(state.tr));\n    };\n\n    this.handleSelectColumn = (index, state) => {\n      this.view.dispatch(prosemirror_utils_1.selectColumn(index)(state.tr));\n    };\n\n    this.handleSelectTable = state => {\n      this.view.dispatch(prosemirror_utils_1.selectTable(state.tr));\n    };\n\n    this.focusAtStart = () => {\n      const selection = prosemirror_state_1.Selection.atStart(this.view.state.doc);\n      const transaction = this.view.state.tr.setSelection(selection);\n      this.view.dispatch(transaction);\n      this.view.focus();\n    };\n\n    this.focusAtEnd = () => {\n      const selection = prosemirror_state_1.Selection.atEnd(this.view.state.doc);\n      const transaction = this.view.state.tr.setSelection(selection);\n      this.view.dispatch(transaction);\n      this.view.focus();\n    };\n\n    this.getHeadings = () => {\n      const headings = [];\n      const previouslySeen = {};\n      this.view.state.doc.forEach(node => {\n        if (node.type.name === \"heading\") {\n          const slug = headingToSlug_1.default(node);\n          let id = slug;\n\n          if (previouslySeen[slug] > 0) {\n            id = headingToSlug_1.default(node, previouslySeen[slug]);\n          }\n\n          previouslySeen[slug] = previouslySeen[slug] !== undefined ? previouslySeen[slug] + 1 : 1;\n          headings.push({\n            title: node.textContent,\n            level: node.attrs.level,\n            id\n          });\n        }\n      });\n      return headings;\n    };\n\n    this.theme = () => {\n      return this.props.theme || (this.props.dark ? theme_1.dark : theme_1.light);\n    };\n\n    this.dictionary = memoize_1.default(providedDictionary => {\n      return Object.assign(Object.assign({}, dictionary_1.default), providedDictionary);\n    });\n  }\n\n  componentDidMount() {\n    this.init();\n\n    if (this.props.scrollTo) {\n      this.scrollToAnchor(this.props.scrollTo);\n    }\n\n    this.calculateDir();\n    if (this.props.readOnly) return;\n\n    if (this.props.autoFocus) {\n      this.focusAtEnd();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.value && prevProps.value !== this.props.value) {\n      const newState = this.createState(this.props.value);\n      this.view.updateState(newState);\n    }\n\n    if (prevProps.readOnly !== this.props.readOnly) {\n      this.view.update(Object.assign(Object.assign({}, this.view.props), {\n        editable: () => !this.props.readOnly\n      }));\n    }\n\n    if (this.props.scrollTo && this.props.scrollTo !== prevProps.scrollTo) {\n      this.scrollToAnchor(this.props.scrollTo);\n    }\n\n    if (prevProps.readOnly && !this.props.readOnly && this.props.autoFocus) {\n      this.focusAtEnd();\n    }\n\n    if (prevProps.dir !== this.props.dir) {\n      this.calculateDir();\n    }\n\n    if (!this.isBlurred && !this.state.isEditorFocused && !this.state.blockMenuOpen && !this.state.linkMenuOpen && !this.state.selectionMenuOpen) {\n      this.isBlurred = true;\n\n      if (this.props.onBlur) {\n        this.props.onBlur();\n      }\n    }\n\n    if (this.isBlurred && (this.state.isEditorFocused || this.state.blockMenuOpen || this.state.linkMenuOpen || this.state.selectionMenuOpen)) {\n      this.isBlurred = false;\n\n      if (this.props.onFocus) {\n        this.props.onFocus();\n      }\n    }\n  }\n\n  init() {\n    this.extensions = this.createExtensions();\n    this.nodes = this.createNodes();\n    this.marks = this.createMarks();\n    this.schema = this.createSchema();\n    this.plugins = this.createPlugins();\n    this.rulePlugins = this.createRulePlugins();\n    this.keymaps = this.createKeymaps();\n    this.serializer = this.createSerializer();\n    this.parser = this.createParser();\n    this.pasteParser = this.createPasteParser();\n    this.inputRules = this.createInputRules();\n    this.nodeViews = this.createNodeViews();\n    this.view = this.createView();\n    this.commands = this.createCommands();\n  }\n\n  createExtensions() {\n    const dictionary = this.dictionary(this.props.dictionary);\n    return new ExtensionManager_1.default([...[new Doc_1.default(), new HardBreak_1.default(), new Paragraph_1.default(), new Blockquote_1.default(), new CodeBlock_1.default({\n      dictionary,\n      onShowToast: this.props.onShowToast\n    }), new CodeFence_1.default({\n      dictionary,\n      onShowToast: this.props.onShowToast\n    }), new Emoji_1.default(), new Text_1.default(), new CheckboxList_1.default(), new CheckboxItem_1.default(), new BulletList_1.default(), new Embed_1.default({\n      embeds: this.props.embeds\n    }), new ListItem_1.default(), new Notice_1.default({\n      dictionary\n    }), new Heading_1.default({\n      dictionary,\n      onShowToast: this.props.onShowToast,\n      offset: this.props.headingsOffset\n    }), new HorizontalRule_1.default(), new Image_1.default({\n      dictionary,\n      uploadImage: this.props.uploadImage,\n      onImageUploadStart: this.props.onImageUploadStart,\n      onImageUploadStop: this.props.onImageUploadStop,\n      onShowToast: this.props.onShowToast\n    }), new Table_1.default(), new TableCell_1.default({\n      onSelectTable: this.handleSelectTable,\n      onSelectRow: this.handleSelectRow\n    }), new TableHeadCell_1.default({\n      onSelectColumn: this.handleSelectColumn\n    }), new TableRow_1.default(), new Bold_1.default(), new Code_1.default(), new Highlight_1.default(), new Italic_1.default(), new Placeholder_1.default(), new Underline_1.default(), new Link_1.default({\n      onKeyboardShortcut: this.handleOpenLinkMenu,\n      onClickLink: this.props.onClickLink,\n      onClickHashtag: this.props.onClickHashtag,\n      onHoverLink: this.props.onHoverLink\n    }), new Strikethrough_1.default(), new OrderedList_1.default(), new History_1.default(), new Folding_1.default(), new SmartText_1.default(), new TrailingNode_1.default(), new PasteHandler_1.default(), new Keys_1.default({\n      onBlur: this.handleEditorBlur,\n      onFocus: this.handleEditorFocus,\n      onSave: this.handleSave,\n      onSaveAndExit: this.handleSaveAndExit,\n      onCancel: this.props.onCancel\n    }), new BlockMenuTrigger_1.default({\n      dictionary,\n      onOpen: this.handleOpenBlockMenu,\n      onClose: this.handleCloseBlockMenu\n    }), new EmojiTrigger_1.default({\n      onOpen: search => {\n        this.setState({\n          emojiMenuOpen: true,\n          blockMenuSearch: search\n        });\n      },\n      onClose: () => {\n        this.setState({\n          emojiMenuOpen: false\n        });\n      }\n    }), new Placeholder_2.default({\n      placeholder: this.props.placeholder\n    }), new MaxLength_1.default({\n      maxLength: this.props.maxLength\n    })].filter(extension => {\n      if (this.props.disableExtensions) {\n        return !this.props.disableExtensions.includes(extension.name);\n      }\n\n      return true;\n    }), ...(this.props.extensions || [])], this);\n  }\n\n  createPlugins() {\n    return this.extensions.plugins;\n  }\n\n  createRulePlugins() {\n    return this.extensions.rulePlugins;\n  }\n\n  createKeymaps() {\n    return this.extensions.keymaps({\n      schema: this.schema\n    });\n  }\n\n  createInputRules() {\n    return this.extensions.inputRules({\n      schema: this.schema\n    });\n  }\n\n  createNodeViews() {\n    return this.extensions.extensions.filter(extension => extension.component).reduce((nodeViews, extension) => {\n      const nodeView = (node, view, getPos, decorations) => {\n        return new ComponentView_1.default(extension.component, {\n          editor: this,\n          extension,\n          node,\n          view,\n          getPos,\n          decorations\n        });\n      };\n\n      return Object.assign(Object.assign({}, nodeViews), {\n        [extension.name]: nodeView\n      });\n    }, {});\n  }\n\n  createCommands() {\n    return this.extensions.commands({\n      schema: this.schema,\n      view: this.view\n    });\n  }\n\n  createNodes() {\n    return this.extensions.nodes;\n  }\n\n  createMarks() {\n    return this.extensions.marks;\n  }\n\n  createSchema() {\n    return new prosemirror_model_1.Schema({\n      nodes: this.nodes,\n      marks: this.marks\n    });\n  }\n\n  createSerializer() {\n    return this.extensions.serializer();\n  }\n\n  createParser() {\n    return this.extensions.parser({\n      schema: this.schema,\n      plugins: this.rulePlugins\n    });\n  }\n\n  createPasteParser() {\n    return this.extensions.parser({\n      schema: this.schema,\n      rules: {\n        linkify: true\n      },\n      plugins: this.rulePlugins\n    });\n  }\n\n  createState(value) {\n    const doc = this.createDocument(value || this.props.defaultValue);\n    return prosemirror_state_1.EditorState.create({\n      schema: this.schema,\n      doc,\n      plugins: [...this.plugins, ...this.keymaps, prosemirror_dropcursor_1.dropCursor({\n        color: this.theme().cursor\n      }), prosemirror_gapcursor_1.gapCursor(), prosemirror_inputrules_1.inputRules({\n        rules: this.inputRules\n      }), prosemirror_keymap_1.keymap(prosemirror_commands_1.baseKeymap)]\n    });\n  }\n\n  createDocument(content) {\n    return this.parser.parse(content);\n  }\n\n  createView() {\n    if (!this.element) {\n      throw new Error(\"createView called before ref available\");\n    }\n\n    const isEditingCheckbox = tr => {\n      return tr.steps.some(step => {\n        var _a, _b, _c;\n\n        return ((_c = (_b = (_a = step.slice) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b.firstChild) === null || _c === void 0 ? void 0 : _c.type.name) === this.schema.nodes.checkbox_item.name;\n      });\n    };\n\n    const self = this;\n    const view = new prosemirror_view_1.EditorView(this.element, {\n      state: this.createState(this.props.value),\n      editable: () => !this.props.readOnly,\n      nodeViews: this.nodeViews,\n      handleDOMEvents: this.props.handleDOMEvents,\n      dispatchTransaction: function (transaction) {\n        const {\n          state,\n          transactions\n        } = this.state.applyTransaction(transaction);\n        this.updateState(state);\n\n        if (transactions.some(tr => tr.docChanged) && (!self.props.readOnly || self.props.readOnlyWriteCheckboxes && transactions.some(isEditingCheckbox))) {\n          self.handleChange();\n        }\n\n        self.calculateDir();\n        self.forceUpdate();\n      }\n    });\n    view.dom.setAttribute(\"role\", \"textbox\");\n    return view;\n  }\n\n  scrollToAnchor(hash) {\n    if (!hash) return;\n\n    try {\n      const element = document.querySelector(hash);\n      if (element) element.scrollIntoView({\n        behavior: \"smooth\"\n      });\n    } catch (err) {\n      console.warn(`Attempted to scroll to invalid hash: ${hash}`, err);\n    }\n  }\n\n  render() {\n    const {\n      dir,\n      readOnly,\n      readOnlyWriteCheckboxes,\n      style,\n      tooltip,\n      className,\n      onKeyDown\n    } = this.props;\n    const {\n      isRTL\n    } = this.state;\n    const dictionary = this.dictionary(this.props.dictionary);\n    return React.createElement(Flex_1.default, {\n      onKeyDown: onKeyDown,\n      style: style,\n      className: className,\n      align: \"flex-start\",\n      justify: \"center\",\n      dir: dir,\n      column: true\n    }, React.createElement(styled_components_1.ThemeProvider, {\n      theme: this.theme()\n    }, React.createElement(React.Fragment, null, React.createElement(editor_1.StyledEditor, {\n      dir: dir,\n      rtl: isRTL,\n      readOnly: readOnly,\n      readOnlyWriteCheckboxes: readOnlyWriteCheckboxes,\n      ref: ref => this.element = ref\n    }), !readOnly && this.view && React.createElement(React.Fragment, null, React.createElement(SelectionToolbar_1.default, {\n      view: this.view,\n      dictionary: dictionary,\n      commands: this.commands,\n      rtl: isRTL,\n      isTemplate: this.props.template === true,\n      onOpen: this.handleOpenSelectionMenu,\n      onClose: this.handleCloseSelectionMenu,\n      onSearchLink: this.props.onSearchLink,\n      onClickLink: this.props.onClickLink,\n      onCreateLink: this.props.onCreateLink,\n      tooltip: tooltip\n    }), React.createElement(LinkToolbar_1.default, {\n      view: this.view,\n      dictionary: dictionary,\n      isActive: this.state.linkMenuOpen,\n      onCreateLink: this.props.onCreateLink,\n      onSearchLink: this.props.onSearchLink,\n      onClickLink: this.props.onClickLink,\n      onShowToast: this.props.onShowToast,\n      onClose: this.handleCloseLinkMenu,\n      tooltip: tooltip\n    }), React.createElement(EmojiMenu_1.default, {\n      view: this.view,\n      commands: this.commands,\n      dictionary: dictionary,\n      rtl: isRTL,\n      isActive: this.state.emojiMenuOpen,\n      search: this.state.blockMenuSearch,\n      onClose: () => this.setState({\n        emojiMenuOpen: false\n      })\n    }), React.createElement(BlockMenu_1.default, {\n      view: this.view,\n      commands: this.commands,\n      dictionary: dictionary,\n      rtl: isRTL,\n      isActive: this.state.blockMenuOpen,\n      search: this.state.blockMenuSearch,\n      onClose: this.handleCloseBlockMenu,\n      uploadImage: this.props.uploadImage,\n      onLinkToolbarOpen: this.handleOpenLinkMenu,\n      onImageUploadStart: this.props.onImageUploadStart,\n      onImageUploadStop: this.props.onImageUploadStop,\n      onShowToast: this.props.onShowToast,\n      embeds: this.props.embeds\n    })))));\n  }\n\n}\n\nRichMarkdownEditor.defaultProps = {\n  defaultValue: \"\",\n  dir: \"auto\",\n  placeholder: \"Write something niceâ€¦\",\n  onImageUploadStart: () => {},\n  onImageUploadStop: () => {},\n  onClickLink: href => {\n    window.open(href, \"_blank\");\n  },\n  embeds: [],\n  extensions: [],\n  tooltip: Tooltip_1.default\n};\nexports.default = RichMarkdownEditor;","map":{"version":3,"sources":["../src/index.tsx"],"names":[],"mappings":"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","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.theme = exports.Extension = exports.renderToHtml = exports.serializer = exports.parser = exports.schema = void 0;\nconst React = __importStar(require(\"react\"));\nconst memoize_1 = __importDefault(require(\"lodash/memoize\"));\nconst prosemirror_state_1 = require(\"prosemirror-state\");\nconst prosemirror_dropcursor_1 = require(\"prosemirror-dropcursor\");\nconst prosemirror_gapcursor_1 = require(\"prosemirror-gapcursor\");\nconst prosemirror_view_1 = require(\"prosemirror-view\");\nconst prosemirror_model_1 = require(\"prosemirror-model\");\nconst prosemirror_inputrules_1 = require(\"prosemirror-inputrules\");\nconst prosemirror_keymap_1 = require(\"prosemirror-keymap\");\nconst prosemirror_commands_1 = require(\"prosemirror-commands\");\nconst prosemirror_utils_1 = require(\"prosemirror-utils\");\nconst styled_components_1 = require(\"styled-components\");\nconst theme_1 = require(\"./styles/theme\");\nconst dictionary_1 = __importDefault(require(\"./dictionary\"));\nconst Flex_1 = __importDefault(require(\"./components/Flex\"));\nconst SelectionToolbar_1 = __importDefault(require(\"./components/SelectionToolbar\"));\nconst BlockMenu_1 = __importDefault(require(\"./components/BlockMenu\"));\nconst EmojiMenu_1 = __importDefault(require(\"./components/EmojiMenu\"));\nconst LinkToolbar_1 = __importDefault(require(\"./components/LinkToolbar\"));\nconst Tooltip_1 = __importDefault(require(\"./components/Tooltip\"));\nconst ExtensionManager_1 = __importDefault(require(\"./lib/ExtensionManager\"));\nconst ComponentView_1 = __importDefault(require(\"./lib/ComponentView\"));\nconst headingToSlug_1 = __importDefault(require(\"./lib/headingToSlug\"));\nconst editor_1 = require(\"./styles/editor\");\nconst Doc_1 = __importDefault(require(\"./nodes/Doc\"));\nconst Text_1 = __importDefault(require(\"./nodes/Text\"));\nconst Blockquote_1 = __importDefault(require(\"./nodes/Blockquote\"));\nconst BulletList_1 = __importDefault(require(\"./nodes/BulletList\"));\nconst CodeBlock_1 = __importDefault(require(\"./nodes/CodeBlock\"));\nconst CodeFence_1 = __importDefault(require(\"./nodes/CodeFence\"));\nconst CheckboxList_1 = __importDefault(require(\"./nodes/CheckboxList\"));\nconst Emoji_1 = __importDefault(require(\"./nodes/Emoji\"));\nconst CheckboxItem_1 = __importDefault(require(\"./nodes/CheckboxItem\"));\nconst Embed_1 = __importDefault(require(\"./nodes/Embed\"));\nconst HardBreak_1 = __importDefault(require(\"./nodes/HardBreak\"));\nconst Heading_1 = __importDefault(require(\"./nodes/Heading\"));\nconst HorizontalRule_1 = __importDefault(require(\"./nodes/HorizontalRule\"));\nconst Image_1 = __importDefault(require(\"./nodes/Image\"));\nconst ListItem_1 = __importDefault(require(\"./nodes/ListItem\"));\nconst Notice_1 = __importDefault(require(\"./nodes/Notice\"));\nconst OrderedList_1 = __importDefault(require(\"./nodes/OrderedList\"));\nconst Paragraph_1 = __importDefault(require(\"./nodes/Paragraph\"));\nconst Table_1 = __importDefault(require(\"./nodes/Table\"));\nconst TableCell_1 = __importDefault(require(\"./nodes/TableCell\"));\nconst TableHeadCell_1 = __importDefault(require(\"./nodes/TableHeadCell\"));\nconst TableRow_1 = __importDefault(require(\"./nodes/TableRow\"));\nconst Bold_1 = __importDefault(require(\"./marks/Bold\"));\nconst Code_1 = __importDefault(require(\"./marks/Code\"));\nconst Highlight_1 = __importDefault(require(\"./marks/Highlight\"));\nconst Italic_1 = __importDefault(require(\"./marks/Italic\"));\nconst Link_1 = __importDefault(require(\"./marks/Link\"));\nconst Strikethrough_1 = __importDefault(require(\"./marks/Strikethrough\"));\nconst Placeholder_1 = __importDefault(require(\"./marks/Placeholder\"));\nconst Underline_1 = __importDefault(require(\"./marks/Underline\"));\nconst BlockMenuTrigger_1 = __importDefault(require(\"./plugins/BlockMenuTrigger\"));\nconst EmojiTrigger_1 = __importDefault(require(\"./plugins/EmojiTrigger\"));\nconst Folding_1 = __importDefault(require(\"./plugins/Folding\"));\nconst History_1 = __importDefault(require(\"./plugins/History\"));\nconst Keys_1 = __importDefault(require(\"./plugins/Keys\"));\nconst MaxLength_1 = __importDefault(require(\"./plugins/MaxLength\"));\nconst Placeholder_2 = __importDefault(require(\"./plugins/Placeholder\"));\nconst SmartText_1 = __importDefault(require(\"./plugins/SmartText\"));\nconst TrailingNode_1 = __importDefault(require(\"./plugins/TrailingNode\"));\nconst PasteHandler_1 = __importDefault(require(\"./plugins/PasteHandler\"));\nvar server_1 = require(\"./server\");\nObject.defineProperty(exports, \"schema\", { enumerable: true, get: function () { return server_1.schema; } });\nObject.defineProperty(exports, \"parser\", { enumerable: true, get: function () { return server_1.parser; } });\nObject.defineProperty(exports, \"serializer\", { enumerable: true, get: function () { return server_1.serializer; } });\nObject.defineProperty(exports, \"renderToHtml\", { enumerable: true, get: function () { return server_1.renderToHtml; } });\nvar Extension_1 = require(\"./lib/Extension\");\nObject.defineProperty(exports, \"Extension\", { enumerable: true, get: function () { return __importDefault(Extension_1).default; } });\nexports.theme = theme_1.light;\nclass RichMarkdownEditor extends React.PureComponent {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            isRTL: false,\n            isEditorFocused: false,\n            selectionMenuOpen: false,\n            blockMenuOpen: false,\n            linkMenuOpen: false,\n            blockMenuSearch: \"\",\n            emojiMenuOpen: false,\n        };\n        this.calculateDir = () => {\n            if (!this.element)\n                return;\n            const isRTL = this.props.dir === \"rtl\" ||\n                getComputedStyle(this.element).direction === \"rtl\";\n            if (this.state.isRTL !== isRTL) {\n                this.setState({ isRTL });\n            }\n        };\n        this.value = () => {\n            return this.serializer.serialize(this.view.state.doc);\n        };\n        this.handleChange = () => {\n            if (!this.props.onChange)\n                return;\n            this.props.onChange(() => {\n                return this.value();\n            });\n        };\n        this.handleSave = () => {\n            const { onSave } = this.props;\n            if (onSave) {\n                onSave({ done: false });\n            }\n        };\n        this.handleSaveAndExit = () => {\n            const { onSave } = this.props;\n            if (onSave) {\n                onSave({ done: true });\n            }\n        };\n        this.handleEditorBlur = () => {\n            this.setState({ isEditorFocused: false });\n        };\n        this.handleEditorFocus = () => {\n            this.setState({ isEditorFocused: true });\n        };\n        this.handleOpenSelectionMenu = () => {\n            this.setState({ blockMenuOpen: false, selectionMenuOpen: true });\n        };\n        this.handleCloseSelectionMenu = () => {\n            this.setState({ selectionMenuOpen: false });\n        };\n        this.handleOpenLinkMenu = () => {\n            this.setState({ blockMenuOpen: false, linkMenuOpen: true });\n        };\n        this.handleCloseLinkMenu = () => {\n            this.setState({ linkMenuOpen: false });\n        };\n        this.handleOpenBlockMenu = (search) => {\n            this.setState({ blockMenuOpen: true, blockMenuSearch: search });\n        };\n        this.handleCloseBlockMenu = () => {\n            if (!this.state.blockMenuOpen)\n                return;\n            this.setState({ blockMenuOpen: false });\n        };\n        this.handleSelectRow = (index, state) => {\n            this.view.dispatch(prosemirror_utils_1.selectRow(index)(state.tr));\n        };\n        this.handleSelectColumn = (index, state) => {\n            this.view.dispatch(prosemirror_utils_1.selectColumn(index)(state.tr));\n        };\n        this.handleSelectTable = (state) => {\n            this.view.dispatch(prosemirror_utils_1.selectTable(state.tr));\n        };\n        this.focusAtStart = () => {\n            const selection = prosemirror_state_1.Selection.atStart(this.view.state.doc);\n            const transaction = this.view.state.tr.setSelection(selection);\n            this.view.dispatch(transaction);\n            this.view.focus();\n        };\n        this.focusAtEnd = () => {\n            const selection = prosemirror_state_1.Selection.atEnd(this.view.state.doc);\n            const transaction = this.view.state.tr.setSelection(selection);\n            this.view.dispatch(transaction);\n            this.view.focus();\n        };\n        this.getHeadings = () => {\n            const headings = [];\n            const previouslySeen = {};\n            this.view.state.doc.forEach(node => {\n                if (node.type.name === \"heading\") {\n                    const slug = headingToSlug_1.default(node);\n                    let id = slug;\n                    if (previouslySeen[slug] > 0) {\n                        id = headingToSlug_1.default(node, previouslySeen[slug]);\n                    }\n                    previouslySeen[slug] =\n                        previouslySeen[slug] !== undefined ? previouslySeen[slug] + 1 : 1;\n                    headings.push({\n                        title: node.textContent,\n                        level: node.attrs.level,\n                        id,\n                    });\n                }\n            });\n            return headings;\n        };\n        this.theme = () => {\n            return this.props.theme || (this.props.dark ? theme_1.dark : theme_1.light);\n        };\n        this.dictionary = memoize_1.default((providedDictionary) => {\n            return Object.assign(Object.assign({}, dictionary_1.default), providedDictionary);\n        });\n    }\n    componentDidMount() {\n        this.init();\n        if (this.props.scrollTo) {\n            this.scrollToAnchor(this.props.scrollTo);\n        }\n        this.calculateDir();\n        if (this.props.readOnly)\n            return;\n        if (this.props.autoFocus) {\n            this.focusAtEnd();\n        }\n    }\n    componentDidUpdate(prevProps) {\n        if (this.props.value && prevProps.value !== this.props.value) {\n            const newState = this.createState(this.props.value);\n            this.view.updateState(newState);\n        }\n        if (prevProps.readOnly !== this.props.readOnly) {\n            this.view.update(Object.assign(Object.assign({}, this.view.props), { editable: () => !this.props.readOnly }));\n        }\n        if (this.props.scrollTo && this.props.scrollTo !== prevProps.scrollTo) {\n            this.scrollToAnchor(this.props.scrollTo);\n        }\n        if (prevProps.readOnly && !this.props.readOnly && this.props.autoFocus) {\n            this.focusAtEnd();\n        }\n        if (prevProps.dir !== this.props.dir) {\n            this.calculateDir();\n        }\n        if (!this.isBlurred &&\n            !this.state.isEditorFocused &&\n            !this.state.blockMenuOpen &&\n            !this.state.linkMenuOpen &&\n            !this.state.selectionMenuOpen) {\n            this.isBlurred = true;\n            if (this.props.onBlur) {\n                this.props.onBlur();\n            }\n        }\n        if (this.isBlurred &&\n            (this.state.isEditorFocused ||\n                this.state.blockMenuOpen ||\n                this.state.linkMenuOpen ||\n                this.state.selectionMenuOpen)) {\n            this.isBlurred = false;\n            if (this.props.onFocus) {\n                this.props.onFocus();\n            }\n        }\n    }\n    init() {\n        this.extensions = this.createExtensions();\n        this.nodes = this.createNodes();\n        this.marks = this.createMarks();\n        this.schema = this.createSchema();\n        this.plugins = this.createPlugins();\n        this.rulePlugins = this.createRulePlugins();\n        this.keymaps = this.createKeymaps();\n        this.serializer = this.createSerializer();\n        this.parser = this.createParser();\n        this.pasteParser = this.createPasteParser();\n        this.inputRules = this.createInputRules();\n        this.nodeViews = this.createNodeViews();\n        this.view = this.createView();\n        this.commands = this.createCommands();\n    }\n    createExtensions() {\n        const dictionary = this.dictionary(this.props.dictionary);\n        return new ExtensionManager_1.default([\n            ...[\n                new Doc_1.default(),\n                new HardBreak_1.default(),\n                new Paragraph_1.default(),\n                new Blockquote_1.default(),\n                new CodeBlock_1.default({\n                    dictionary,\n                    onShowToast: this.props.onShowToast,\n                }),\n                new CodeFence_1.default({\n                    dictionary,\n                    onShowToast: this.props.onShowToast,\n                }),\n                new Emoji_1.default(),\n                new Text_1.default(),\n                new CheckboxList_1.default(),\n                new CheckboxItem_1.default(),\n                new BulletList_1.default(),\n                new Embed_1.default({ embeds: this.props.embeds }),\n                new ListItem_1.default(),\n                new Notice_1.default({\n                    dictionary,\n                }),\n                new Heading_1.default({\n                    dictionary,\n                    onShowToast: this.props.onShowToast,\n                    offset: this.props.headingsOffset,\n                }),\n                new HorizontalRule_1.default(),\n                new Image_1.default({\n                    dictionary,\n                    uploadImage: this.props.uploadImage,\n                    onImageUploadStart: this.props.onImageUploadStart,\n                    onImageUploadStop: this.props.onImageUploadStop,\n                    onShowToast: this.props.onShowToast,\n                }),\n                new Table_1.default(),\n                new TableCell_1.default({\n                    onSelectTable: this.handleSelectTable,\n                    onSelectRow: this.handleSelectRow,\n                }),\n                new TableHeadCell_1.default({\n                    onSelectColumn: this.handleSelectColumn,\n                }),\n                new TableRow_1.default(),\n                new Bold_1.default(),\n                new Code_1.default(),\n                new Highlight_1.default(),\n                new Italic_1.default(),\n                new Placeholder_1.default(),\n                new Underline_1.default(),\n                new Link_1.default({\n                    onKeyboardShortcut: this.handleOpenLinkMenu,\n                    onClickLink: this.props.onClickLink,\n                    onClickHashtag: this.props.onClickHashtag,\n                    onHoverLink: this.props.onHoverLink,\n                }),\n                new Strikethrough_1.default(),\n                new OrderedList_1.default(),\n                new History_1.default(),\n                new Folding_1.default(),\n                new SmartText_1.default(),\n                new TrailingNode_1.default(),\n                new PasteHandler_1.default(),\n                new Keys_1.default({\n                    onBlur: this.handleEditorBlur,\n                    onFocus: this.handleEditorFocus,\n                    onSave: this.handleSave,\n                    onSaveAndExit: this.handleSaveAndExit,\n                    onCancel: this.props.onCancel,\n                }),\n                new BlockMenuTrigger_1.default({\n                    dictionary,\n                    onOpen: this.handleOpenBlockMenu,\n                    onClose: this.handleCloseBlockMenu,\n                }),\n                new EmojiTrigger_1.default({\n                    onOpen: (search) => {\n                        this.setState({ emojiMenuOpen: true, blockMenuSearch: search });\n                    },\n                    onClose: () => {\n                        this.setState({ emojiMenuOpen: false });\n                    },\n                }),\n                new Placeholder_2.default({\n                    placeholder: this.props.placeholder,\n                }),\n                new MaxLength_1.default({\n                    maxLength: this.props.maxLength,\n                }),\n            ].filter(extension => {\n                if (this.props.disableExtensions) {\n                    return !this.props.disableExtensions.includes(extension.name);\n                }\n                return true;\n            }),\n            ...(this.props.extensions || []),\n        ], this);\n    }\n    createPlugins() {\n        return this.extensions.plugins;\n    }\n    createRulePlugins() {\n        return this.extensions.rulePlugins;\n    }\n    createKeymaps() {\n        return this.extensions.keymaps({\n            schema: this.schema,\n        });\n    }\n    createInputRules() {\n        return this.extensions.inputRules({\n            schema: this.schema,\n        });\n    }\n    createNodeViews() {\n        return this.extensions.extensions\n            .filter((extension) => extension.component)\n            .reduce((nodeViews, extension) => {\n            const nodeView = (node, view, getPos, decorations) => {\n                return new ComponentView_1.default(extension.component, {\n                    editor: this,\n                    extension,\n                    node,\n                    view,\n                    getPos,\n                    decorations,\n                });\n            };\n            return Object.assign(Object.assign({}, nodeViews), { [extension.name]: nodeView });\n        }, {});\n    }\n    createCommands() {\n        return this.extensions.commands({\n            schema: this.schema,\n            view: this.view,\n        });\n    }\n    createNodes() {\n        return this.extensions.nodes;\n    }\n    createMarks() {\n        return this.extensions.marks;\n    }\n    createSchema() {\n        return new prosemirror_model_1.Schema({\n            nodes: this.nodes,\n            marks: this.marks,\n        });\n    }\n    createSerializer() {\n        return this.extensions.serializer();\n    }\n    createParser() {\n        return this.extensions.parser({\n            schema: this.schema,\n            plugins: this.rulePlugins,\n        });\n    }\n    createPasteParser() {\n        return this.extensions.parser({\n            schema: this.schema,\n            rules: { linkify: true },\n            plugins: this.rulePlugins,\n        });\n    }\n    createState(value) {\n        const doc = this.createDocument(value || this.props.defaultValue);\n        return prosemirror_state_1.EditorState.create({\n            schema: this.schema,\n            doc,\n            plugins: [\n                ...this.plugins,\n                ...this.keymaps,\n                prosemirror_dropcursor_1.dropCursor({ color: this.theme().cursor }),\n                prosemirror_gapcursor_1.gapCursor(),\n                prosemirror_inputrules_1.inputRules({\n                    rules: this.inputRules,\n                }),\n                prosemirror_keymap_1.keymap(prosemirror_commands_1.baseKeymap),\n            ],\n        });\n    }\n    createDocument(content) {\n        return this.parser.parse(content);\n    }\n    createView() {\n        if (!this.element) {\n            throw new Error(\"createView called before ref available\");\n        }\n        const isEditingCheckbox = tr => {\n            return tr.steps.some((step) => {\n                var _a, _b, _c;\n                return ((_c = (_b = (_a = step.slice) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b.firstChild) === null || _c === void 0 ? void 0 : _c.type.name) ===\n                    this.schema.nodes.checkbox_item.name;\n            });\n        };\n        const self = this;\n        const view = new prosemirror_view_1.EditorView(this.element, {\n            state: this.createState(this.props.value),\n            editable: () => !this.props.readOnly,\n            nodeViews: this.nodeViews,\n            handleDOMEvents: this.props.handleDOMEvents,\n            dispatchTransaction: function (transaction) {\n                const { state, transactions } = this.state.applyTransaction(transaction);\n                this.updateState(state);\n                if (transactions.some(tr => tr.docChanged) &&\n                    (!self.props.readOnly ||\n                        (self.props.readOnlyWriteCheckboxes &&\n                            transactions.some(isEditingCheckbox)))) {\n                    self.handleChange();\n                }\n                self.calculateDir();\n                self.forceUpdate();\n            },\n        });\n        view.dom.setAttribute(\"role\", \"textbox\");\n        return view;\n    }\n    scrollToAnchor(hash) {\n        if (!hash)\n            return;\n        try {\n            const element = document.querySelector(hash);\n            if (element)\n                element.scrollIntoView({ behavior: \"smooth\" });\n        }\n        catch (err) {\n            console.warn(`Attempted to scroll to invalid hash: ${hash}`, err);\n        }\n    }\n    render() {\n        const { dir, readOnly, readOnlyWriteCheckboxes, style, tooltip, className, onKeyDown, } = this.props;\n        const { isRTL } = this.state;\n        const dictionary = this.dictionary(this.props.dictionary);\n        return (React.createElement(Flex_1.default, { onKeyDown: onKeyDown, style: style, className: className, align: \"flex-start\", justify: \"center\", dir: dir, column: true },\n            React.createElement(styled_components_1.ThemeProvider, { theme: this.theme() },\n                React.createElement(React.Fragment, null,\n                    React.createElement(editor_1.StyledEditor, { dir: dir, rtl: isRTL, readOnly: readOnly, readOnlyWriteCheckboxes: readOnlyWriteCheckboxes, ref: ref => (this.element = ref) }),\n                    !readOnly && this.view && (React.createElement(React.Fragment, null,\n                        React.createElement(SelectionToolbar_1.default, { view: this.view, dictionary: dictionary, commands: this.commands, rtl: isRTL, isTemplate: this.props.template === true, onOpen: this.handleOpenSelectionMenu, onClose: this.handleCloseSelectionMenu, onSearchLink: this.props.onSearchLink, onClickLink: this.props.onClickLink, onCreateLink: this.props.onCreateLink, tooltip: tooltip }),\n                        React.createElement(LinkToolbar_1.default, { view: this.view, dictionary: dictionary, isActive: this.state.linkMenuOpen, onCreateLink: this.props.onCreateLink, onSearchLink: this.props.onSearchLink, onClickLink: this.props.onClickLink, onShowToast: this.props.onShowToast, onClose: this.handleCloseLinkMenu, tooltip: tooltip }),\n                        React.createElement(EmojiMenu_1.default, { view: this.view, commands: this.commands, dictionary: dictionary, rtl: isRTL, isActive: this.state.emojiMenuOpen, search: this.state.blockMenuSearch, onClose: () => this.setState({ emojiMenuOpen: false }) }),\n                        React.createElement(BlockMenu_1.default, { view: this.view, commands: this.commands, dictionary: dictionary, rtl: isRTL, isActive: this.state.blockMenuOpen, search: this.state.blockMenuSearch, onClose: this.handleCloseBlockMenu, uploadImage: this.props.uploadImage, onLinkToolbarOpen: this.handleOpenLinkMenu, onImageUploadStart: this.props.onImageUploadStart, onImageUploadStop: this.props.onImageUploadStop, onShowToast: this.props.onShowToast, embeds: this.props.embeds })))))));\n    }\n}\nRichMarkdownEditor.defaultProps = {\n    defaultValue: \"\",\n    dir: \"auto\",\n    placeholder: \"Write something niceâ€¦\",\n    onImageUploadStart: () => {\n    },\n    onImageUploadStop: () => {\n    },\n    onClickLink: href => {\n        window.open(href, \"_blank\");\n    },\n    embeds: [],\n    extensions: [],\n    tooltip: Tooltip_1.default,\n};\nexports.default = RichMarkdownEditor;\n"]},"metadata":{},"sourceType":"script"}